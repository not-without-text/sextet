<head>
  <title>sextet - worded puzzle</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@550&amp;display=swap" rel="stylesheet">
  <style>
    * {
      font-family: "Source Code Pro", monospace;
      font-size: 80px;
      text-align: center;
      color: #4a2b01;
      margin-top: 5px;
      margin-bottom: 5px;
    }
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      background-color: #d9d69c;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    button, input {
      border-color: #251501;
      border-width: 10px;
      border-radius: 5px;
      border-style: solid;
    }
    button {
      background-color: #966623;
    }
    button:hover {
      background-color: #c28a3c;
    }
    button:active {
      background-color: #deb157;
    }
    button:disabled {
      background-color: #917d60;
      color: #635541;
      border-color: #635541;
    }
    .longer {
      display: block;
      width: 320px;
    }
    .square {
      width: 120px;
      display: inline-block;
      margin-left: 5px;
      margin-right: 5px;
      padding: 0;
    }
    input {
      background-color: #b3af6d
    }
    input:focus {
      background-color: #d1cd77
    }
    .hidden {
      display: none;
    }
  </style>
  <script>
    let curAct = "screen"
    let series = [
      [0,"typehi","hi"],
      null,
      [0,"tooths","teeth"],
      [0,"sheeps","sheep"],
      [0,"axises","axes"],
      [0,"fishes","fish"],
      [1,"nuclei","nucleuses","nucleusses"],
      null,
      [0,"lended","lent"],
      [0,"seeked","sought"],
      [0,"burned","burnt"],
      [1,"strung","stringed"],
      [0,"canned","could"],
      [0,"worked","wrought"],
      [0,"lieded","laid"]
    ]
    function loadup() {
      let curDiv = document.createElement("div")
      let create = marker => () => reveal(marker)
      let number = 0;
      document.querySelector("#levels").appendChild(curDiv)
      for (let marker=0;marker<series.length;marker++) {
        let puzzle = series[marker]
        if (puzzle) {
          let lvTile = document.createElement("button");
          lvTile.classList.add("square")
          lvTile.onclick = create(marker)
          number++
          lvTile.textContent = number.toString()
          curDiv.appendChild(lvTile)
        } else {
          curDiv = document.createElement("div")
          document.querySelector("#levels").appendChild(curDiv)
        }
      }
      document.querySelector("#gameOn").disabled = false
    }
    function reveal(number) {
      let puzzle = series[number]
      document.querySelector("#answer").value = ""
      moveTo("puzzle")
      if (puzzle[0] === 0) {
        document.querySelector("#prompt").textContent = puzzle[1]
        document.querySelector("#bottom").textContent = ""
      } else {
        document.querySelector("#bottom").textContent = puzzle[1]
        document.querySelector("#prompt").textContent = ""
      }
      document.querySelector("#answer").focus()
      document.querySelector("#answer").onchange = function() {
        console.log("checking")
        if (puzzle.indexOf(this.value.toLowerCase()) > 1) {
          if (series[number+1]) {
            reveal(number+1)
          } else {
            moveTo("levels")
          }
        } else {
          this.value = ""
        }
      }
    }
    function moveTo(sector) {
      document.querySelector("#"+curAct).classList.add("hidden")
      document.querySelector("#"+sector).classList.remove("hidden")
      curAct = sector
    }
  </script>
</head>

<body onload="loadup()">
  <div id="screen">
    sextet
    <button id="gameOn" class="longer" onclick="moveTo('levels')" disabled>launch</button>
    <button class="longer" onclick="moveTo('option')">option</button>
    <button class="longer">credit</button>
  </div>
  <div id="levels" class="hidden"></div>
  <div id="option" class="hidden">
    <button class="longer">newrun</button>
    <button class="longer" onclick="moveTo('screen')">return</button>
  </div>
  <div id="puzzle" class="hidden">
    <span id="prompt">sextet</span>
    <input id="answer" class="longer">
    <span id="bottom">sextet</span>
  </div>
</body>
